-- DDL

-- USER
CREATE TABLE USERLIST(
    User_id VARCHAR(15) NOT NULL,
    PW VARCHAR(15) NOT NULL,
    Uniq_id VARCHAR(20) NOT NULL,
    Nickname VARCHAR(15) NOT NULL,
    Introduction VARCHAR(50),
    Available VARCHAR(1) DEFAULT 'Y' NOT NULL,
    PRIMARY KEY(Uniq_id),
    UNIQUE(User_id)
);

-- REGION
CREATE TABLE REGION(
    Uuid VARCHAR(20) NOT NULL,
    Address VARCHAR(50) NOT NULL,
    Latitude NUMBER NOT NULL,
    Longitude NUMBER NOT NULL,
    X_coor NUMBER NOT NULL,
    Y_coor NUMBER NOT NULL,
    PRIMARY KEY(Uuid, Address)
);
ALTER TABLE REGION ADD FOREIGN KEY(Uuid) REFERENCES USERLIST(Uniq_id) ON DELETE CASCADE;

-- INFO_LIST
CREATE TABLE INFO_LIST(
    Type_no NUMBER NOT NULL,
    Type_name VARCHAR(15) NOT NULL,
    PRIMARY KEY(Type_no),
    UNIQUE(Type_name)
);

-- CHOOSE
CREATE TABLE CHOOSE(
    Uuid VARCHAR(20) NOT NULL,
    Type_num NUMBER NOT NULL,
    PRIMARY KEY(Uuid, Type_num)
);
ALTER TABLE CHOOSE ADD FOREIGN KEY(Uuid) REFERENCES USERLIST(Uniq_id) ON DELETE CASCADE;
ALTER TABLE CHOOSE ADD FOREIGN KEY(Type_num) REFERENCES INFO_LIST(Type_no) ON DELETE CASCADE;

-- WEATEHR_RECORD
CREATE TABLE WEATHER_RECORD(
    Uuid VARCHAR(20) NOT NULL,
    Rdate DATE NOT NULL,
    Address VARCHAR(50),
    Feeling VARCHAR(15) NOT NULL,
    Tmax NUMBER(3,1),
    Tmin NUMBER(3,1),
    PRIMARY KEY(Uuid,Rdate)
);
ALTER TABLE WEATHER_RECORD ADD FOREIGN KEY(Uuid) REFERENCES USERLIST(Uniq_id) ON DELETE CASCADE;

COMMIT;